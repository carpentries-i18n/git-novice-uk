---
title: Ігнорування файлів
teaching: 5
exercises: 0
questions:
- "Як зробити щоб Git ігнорував файли, які я не хочу відстежувати?"
objectives:
- "Налаштувати Git для ігнорування певних файлів."
- "Зрозуміти чому ігнорування файлів може бути корисним."
keypoints:
- "Файл `.gitignore` інформує Git про те, які файли треба ігнорувати."
---

Що робити, якщо у нас є файли, які ми не хочемо відстежувати у Git,
наприклад, резервні файли, створені нашим редактором
або проміжні файли, створені під час аналізу даних?
Давайте створимо кілька фіктивних файлів:

~~~
$ mkdir results
$ touch a.dat b.dat c.dat results/a.out results/b.out
~~~
{: .language-bash}

і подивимося що скаже Git:

~~~
$ git status
~~~
{: .language-bash}

~~~
On branch main
Untracked files:
  (use "git add <file>..." to include in what will be committed)

\ta.dat
\tb.dat
\tc.dat
\tresults/

nothing added to commit but untracked files present (use "git add" to track)
~~~
{: .output}

Відстеження цих файлів за допомогою контролю версій буде марною тратою дискового простору.
Що гірше,
висвітлення змін в них, під час перегляду історії або статусу проєкту може відвернути нас від змін, які насправді мають значення,
тож давайте скажемо Git, що їх треба ігнорувати.

Ми можемо зробити це, створюючи у кореневій директорії нашого проєкту файл під назвою `.gitignore`:

~~~
$ nano .gitignore
$ cat .gitignore
~~~
{: .language-bash}

~~~
*.dat
results/
~~~
{: .output}

Цей синтакс наказує Git ігнорувати будь-який файл, ім'я якого закінчується на `.dat`
та все, що знаходиться у директорії `results`.
(Якщо будь-які з цих файлів вже відстежуються,
Git продовжить їх відстежувати.)

Як тільки ми створили цей файл,
результат `git status` стає набагато зрозумілішим:

~~~
$ git status
~~~
{: .language-bash}

~~~
On branch main
Untracked files:
  (use "git add <file>..." to include in what will be committed)

\t.gitignore

nothing added to commit but untracked files present (use "git add" to track)
~~~
{: .output}

Єдина річ, яку Git помічає зараз - це новостворений файл `.gitignore`.
Ви можете подумати, що ми не хотіли б відстежувати його,
але всі, з ким ми ділимося нашим репозиторієм, ймовірно, захочуть ігнорувати
те ж саме, що ми ігноруємо.
Давайте додамо до репозиторію та зробимо коміт файлу `.gitignore`:

~~~
$ git add .gitignore
$ git commit -m "Ignore data files and the results folder."
$ git status
~~~
{: .language-bash}

~~~
On branch main
nothing to commit, working tree clean
~~~
{: .output}

Як бонус, використання `.gitignore` допомагає нам уникнути випадкового додавання до репозиторію файлів, які ми не хочемо відстежувати:

~~~
$ git add a.dat
~~~
{: .language-bash}

~~~
The following paths are ignored by one of your .gitignore files:
a.dat
Use -f if you really want to add them.
~~~
{: .output}

Якщо ми дійсно хочемо змінити наші налаштування ігнорування,
ми можемо використати `git add -f`, щоб змусити Git додати щось. Наприклад,
`git add -f a.dat`.
Ми також завжди можемо бачити статус ігнорованих файлів, якщо хочемо:

~~~
$ git status --ignored
~~~
{: .language-bash}

~~~
On branch main
Ignored files:
 (use "git add -f <file>..." to include in what will be committed)

        a.dat
        b.dat
        c.dat
        results/

nothing to commit, working tree clean
~~~
{: .output}

> ## Ігнорування файлів у піддиректоріях
>
> Враховуючи структуру директорій, яка виглядає як:
>
> ~~~
> results/data
> results/plots
> ~~~
> {: .language-bash}
>
> як зробити так, щоб Git ігнорував тільки `results/plots`, а не `results/data`?
>
> > ## Відповідь
> >
> > Якщо ви тільки хочете ігнорувати вміст
> > `results/plots`, ви можете зробити це
> > шляхом додавання наступного рядка до
> > вашого .gitignore:
> >
> > ~~~
> > results/plots/
> > ~~~
> > {: .output}
> >
> > Цей рядок забезпечить ігнорування лише вмісту `results/plots`, але 
> > не вмісту `results/data`.
> >
> > Як і в більшості питань програмування,
> > є ще кілька альтернативних способів, які можуть забезпечити виконання цього правила ігнорування.
> > Вправа «Варіант ігнорування вкладених файлів» має трохи
> > іншу структуру директорій,
> > та пояснює альтернативне рішення.
> > Крім того, сторінка обговорення має більш детальну інформацію про правила ігнорування.
> {: .solution}
{: .challenge}

> ## Додавання конкретних файлів
>
> Як ігнорувати всі файли `.dat` у кореневій директорії, за вийнятком
> `final.dat`?
> Підказка: Дізнайтеся, що робить «!» (оператор знаку оклику)
>
> > ## Відповідь
> >
> > Треба додати наступні два рядки до вашого файлу `.gitignore`:
> >
> > ~~~
> > *.dat           # ignore all data files
> > !final.dat      # except final.data
> > ~~~
> > {: .output}
> >
> > Оператор знаку оклику призведе до включення раніше виключеного запису.
> >
> > Зверніть увагу також на те, що, оскільки ви раніше вже зберегли файли `.dat` у комітах зроблених в цьому
> > уроці, вони не будуть проігноровані з цим новим правилом. Тільки майбутні додавання 
> > `.dat` файлів до кореневої директорії будуть проігноровані.
> {: .solution}
{: .challenge}

> ## Варіант ігнорування вкладених файлів
>
> Нехай ми маємо структуру каталогів, яка схожа на попередню вправу "Ігнорування файлів у піддиректоріях",
> проте, з трішки іншою структурою директорій:
>
> ~~~
> results/data
> results/images
> results/plots
> results/analysis
> ~~~
> {: .language-bash}
>
> Як би ви проігнорували весь вміст у папці `results`, окрім `results/data`?
>
> Підказка: подумайте трохи про те, як ви попередньо створили виняток
> за допомогою оператору `!`.
>
> > ## Відповідь
> >
> > Якщо ви хочете ігнорувати вміст
> > `results/` але не `results/data/`, ви можете змінити ваш`.gitignore`, щоб ігнорувати
> > вміст папки `results`, але створити виняток для вмісту
> > підпапки `results/data`. Ваш `.gitignore` буде виглядати так:
> >
> > ~~~
> > results/*               # ignore everything in results folder
> > !results/data/          # do not ignore results/data/ contents
> > ~~~
> > {: .output}
> {: .solution}
{: .challenge}

> ## Ігнорування всіх Файлів даних у Директорії
>
> Припустимо, що у вас порожній .gitignore файл, і дано структуру каталогів, яка виглядає як:
>
> ~~~
> results/data/position/gps/a.dat
> results/data/position/gps/b.dat
> results/data/position/gps/c.dat
> results/data/position/gps/info.txt
> results/plots
> ~~~
> {: .language-bash}
>
> Яке найкоротше правило `.gitignore` ви можете написати, щоб ігнорувати файли `.dat`
> в `result/data/position/gps`? Не ігноруйте `info.txt`.
>
> > ## Відповідь
> >
> > Додавання `results/data/position/gps/*.dat` буде відповідати кожному з файлів у `results/data/position/gps`,
> > які закінчуються на `.dat`.
> > Файл `results/data/position/gps/info.txt` не буде проігноровано.
> {: .solution}
{: .challenge}

> ## Ігнорування всіх файлів з даними у репозиторії
>
> Припустимо, що у вас є багато файлів «.dat» в різних піддиректоріях вашого репозиторію.
> Наприклад, у вас є:
> 
> ~~~
> results/a.dat
> data/experiment_1/b.dat
> data/experiment_2/c.dat
> data/experiment_2/variation_1/d.dat
> ~~~
> {: .language-bash}
> 
> Як ігнорувати всі файли «.dat», не вказуючи явно імена усіх відповідних папок?
> 
> > ## Відповідь
> >
> > У файлі `.gitignore` напишіть:
> > 
> > ~~~
> > **/*.dat               
> > ~~~
> > {: .output}
> >
> > Це ігноруватиме всі файли `.dat`, незалежно від їх позиції у дереві директорій. 
> > Ви все ще можете робити певні винятки з цього правила за допомогою знаку оклику.
> {: .solution}
{: .challenge}

> ## Порядок застосування правил
>
> Нехай дано файл `.gitignore` з наступним вмістом:
>
> ~~~
> *.dat
> !*.dat
> ~~~
> {: .language-bash}
>
> Яким буде результат?
>
> > ## Відповідь
> >
> > Модифікатор `!` скасує запис з раніше визначеного шаблону ігнорування.
> > Оскільки запис `! *.dat` скасовує всі попередні файли `.dat` в `.gitignore`,
> > жоден з них не буде проігноровано, і всі файли `.dat` будуть відслідковуватися.
> {: .solution}
{: .challenge}

> ## Log-файли 
>
> Ви написали скрипт, який створює багато проміжних log-файлів з назвами `log_01`, `log_02`, `log_03`, т.д.
> Ви хочете зберегти їх, але ви не хочете відстежувати їх через `git`.
>
> 1. Напишіть **один** `.gitignore` запис, що виключає файли форми `log_01`, `log_02`, т.д.
>
> 2. Перевірте свій "шаблон ігнорування", створивши деякі фіктивні файли з назвою `log_01`, т.д.
>
> 3. Уявіть, що файл `log_01` дуже важливий, та додайте його до вдслідковуваних файлів, не змінюючи `.gitignore`.
>
> 4. Обговоріть з сусідом, які інші типи файлів можуть перебувати у вашому проєкті, які ви не бажаєте відслідковувати і тому бажаєте проігнорувати їх з `.gitignore`.
>
> > ## Відповідь
> >
> > 1. додайте або `log_*`  або  `log*`  як новий запис у вашому `.gitignore`
> > 3. відстежте `log_01`, використовуючи `git add -f log_01`
> {: .solution}
{: .challenge}

